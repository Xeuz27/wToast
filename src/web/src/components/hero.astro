---
import Button from "./Button.astro"
---

<main class="h-[75vh] flex justify-center overflow-hidden flex-col relative gap-2 items-center">
	<div id="mask-vertical">
		<div id="mask-horizontal">
			<div id="square-pattern" class="rotate-[45deg]"></div>
		</div>
	</div>
	<span class="font-bold text-6xl">wToast</span>
	<p class="text-white text-2xl text-balance text-center w-2/4">
		es una utilidad para mostrar un toast, una notificacion con un mensaje normalmente de exito o de fallo de alguna operacion
	</p>
	<div class="">
		<Button text="toast" id="toast-btn" />
		<Button text="Promesa" id="toast-promesa" />
	</div>
</main>
<script type="module" is:inline>
	const { wToast } = await import("https://cdn.jsdelivr.net/npm/@yidev/wtoast@latest/dist/cdn/index.js")
	let trueOrFalse = 1
	export const sleep = async (ms) => {
		if (trueOrFalse % 2 === 0) {
			trueOrFalse += 1
			await new Promise((resolve, reject) => setTimeout(reject, ms))
		} else {
			trueOrFalse += 1
			await new Promise((resolve, reject) => setTimeout(resolve, ms))
		}
	}

	const { show, promise } = wToast()
	document.addEventListener("astro:page-load", () => {
		document.getElementById("toast-btn")?.addEventListener("click", () => {
			// var svg = document.createElement("div")
			// svg.innerHTML = loading
			// svg.className = "text-white mr-2"
			show("mensaje default", {
				type: "default",
				className: "outline-4 text-center",
				title: "Titulo",
				// icon: loading,
				// icon: loading2,
				duration: 3000,
			})
			show("info", {
				type: "info",
				// icon: loading,
				// icon: loading2,
				duration: 3000,
			})
			show("success", {
				type: "success",
				// icon: loading,
				// icon: loading2,
				duration: 3000,
			})
			show("la operacion fallo por...", {
				type: "error",
				title: "Error",
				// icon: loading,
				// icon: loading2,
				duration: 3000,
			})
			show("warning", {
				type: "warning",
				// icon: loading,
				// icon: loading2,
				duration: 3000,
			})
		})

		document.getElementById("toast-promesa")?.addEventListener("click", () => {
			// var svg = document.createElement("div")
			// svg.innerHTML = loading
			// svg.className = "text-white mr-2"
			promise(sleep(1500), {
				loading: "Cargando promesa...",
				success: "Promesa resuelta ðŸŽ‰",
				error: "Error en promesa ðŸ˜ž",
			})
				//el timer no se pausa on hover?
				//@ts-ignore
				.onResolve((data) => console.log(data))
				//@ts-ignore
				.onReject((err) => console.error(err))
		})
	})
</script>
<style>
	/*prettier-ignore*/
	main {
		background-position: center;
		background-repeat: no-repeat;
		background-size:  cover;
		background-attachment: fixed;
		background-image:
			linear-gradient(color-mix(in oklab, #051b1a 80%, transparent) 0 0),
			url("/luces.webp");
		mask-image: linear-gradient(black 75%, transparent 100%);
	}
	span {
		font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
		color: transparent;
		background-clip: text;
		background-image: linear-gradient(90deg, rgba(36, 151, 148, 1) 50%);
	}
	/*prettier-ignore*/
	#square-pattern {
		z-index: -08;
		position: fixed;
		translate: -650px;
		inset: 0;
		width: 250%;
		height: 250%;
		background-size: 80px 80px;
		background-image:
    		linear-gradient(to bottom, var(--svg-pattern-bg-image-color) 1px, transparent 1px),
      		linear-gradient(to right, var(--svg-pattern-bg-image-color) 1px, transparent 1px);
    	
	}
	/*prettier-ignore*/
	#mask-vertical {
		inset: 0;
		position: fixed;
		z-index: -08;
		mask-image: linear-gradient( to top, transparent -05%, black 50%, transparent 105% );
	}
	/*prettier-ignore*/
	#mask-horizontal {
		inset: 0;
		position: fixed;
		z-index: -08;
		mask-image: linear-gradient( to right, transparent -05%, black 50%, transparent 105% );
	}
</style>
